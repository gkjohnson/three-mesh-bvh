import{M as f,i as M,V as x,W as T,c as H,d as P,D as L,A as S,T as v,m as W,t as D,P as V,g as G,X as R,e as F,a9 as I,n as z,K as O,b as j}from"./ExtendedTriangle-hsPasuNU.js";/* empty css               */import{S as k}from"./stats.min-DbzWzcqd.js";import{g as A}from"./lil-gui.module.min-BH_YJbPT.js";import{O as K}from"./OrbitControls-DEZHvbFX.js";import{T as U}from"./TransformControls-DGYuTlwP.js";import{a as X,c as q,d as J}from"./ExtensionUtilities-BlnM4xb7.js";import{B as N}from"./BVHHelper-DA_xcAFF.js";import"./_commonjsHelpers-CqkleIqs.js";import"./MeshBVH-DQV6PBDm.js";f.prototype.raycast=X;M.prototype.computeBoundsTree=q;M.prototype.disposeBoundsTree=J;const e={speed:1,displayBVH:!1,displayDepth:10,shape:"sphere",position:new x,rotation:new I,scale:new x(1,1,1)};let g,d,c,s,h,n,a,i,l,E=window.performance.now();Q();B();function Q(){s=new T({antialias:!0}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.setClearColor(1250841,1),s.setAnimationLoop(Y),document.body.appendChild(s.domElement),d=new H,d.fog=new P(1250841,20,60);const t=new L(16777215,1.5);t.position.set(1,1,1),d.add(t,new S(16777215,1.2));const w=new v(1,.4,400,100),m=new W({color:16777215,side:D});i=new f(w,m),i.geometry.computeBoundsTree(),d.add(i),c=new V(75,window.innerWidth/window.innerHeight,.1,100),c.position.set(3,3,3),a=new U(c,s.domElement),d.add(a.getHelper()),h=new K(c,s.domElement),g=new k,document.body.appendChild(g.dom);const o=new G({metalness:.1,transparent:!0,opacity:.75,premultipliedAlpha:!0});l={sphere:new f(new F(1,50,50),o),box:new f(new R(1,1,1),o),geometry:new f(new v(.5,.2,200,50),o)},l.geometry.geometry.computeBoundsTree(),Object.values(l).forEach(p=>d.add(p));const r=new A;r.add(e,"speed",0,10),r.add(e,"displayBVH").onChange(B),r.add(e,"displayDepth",1,40,1).onChange(p=>{n&&(n.depth=p,n.update())}),r.add(e,"shape",["sphere","box","geometry"]),r.add(a,"mode",["translate","rotate"]);const y=r.addFolder("Position");y.add(e.position,"x",-5,5,.001),y.add(e.position,"y",-5,5,.001),y.add(e.position,"z",-5,5,.001),y.open();const u=r.addFolder("Rotation");u.add(e.rotation,"x",-Math.PI,Math.PI,.001),u.add(e.rotation,"y",-Math.PI,Math.PI,.001),u.add(e.rotation,"z",-Math.PI,Math.PI,.001),u.open(),r.open(),a.addEventListener("change",()=>{e.position.copy(l[e.shape].position),e.rotation.copy(l[e.shape].rotation),e.scale.copy(l[e.shape].scale),r.controllersRecursive().forEach(p=>p.updateDisplay())}),a.addEventListener("mouseDown",()=>h.enabled=!1),a.addEventListener("mouseUp",()=>h.enabled=!0),h.addEventListener("start",()=>a.enabled=!1),h.addEventListener("end",()=>a.enabled=!0),window.addEventListener("keydown",p=>{p.key==="w"&&(a.mode="translate"),p.key==="e"&&(a.mode="rotate"),r.controllersRecursive().forEach(C=>C.updateDisplay())}),window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)})}function B(){n&&!e.displayBVH&&(d.remove(n),n=null),!n&&e.displayBVH&&(n=new N(i),d.add(n))}function Y(){const b=window.performance.now()-E;E=window.performance.now(),i.rotation.y+=e.speed*b*.001,i.updateMatrixWorld(),g.begin(),n&&(n.visible=e.displayBVH),Object.values(l).forEach(o=>o.visible=!1);const t=l[e.shape];t.visible=!0,t.position.copy(e.position),t.rotation.copy(e.rotation),t.scale.copy(e.scale);const w=new z().copy(i.matrixWorld).invert().multiply(t.matrixWorld);let m=!1;if(e.shape==="sphere"){const o=new O(void 0,1);o.applyMatrix4(w),m=i.geometry.boundsTree.intersectsSphere(o)}else if(e.shape==="box"){const o=new j;o.min.set(-.5,-.5,-.5),o.max.set(.5,.5,.5),m=i.geometry.boundsTree.intersectsBox(o,w)}else e.shape==="geometry"&&(m=i.geometry.boundsTree.intersectsGeometry(t.geometry,w));t.material.color.set(m?15277667:6710886),t.material.emissive.set(15277667).multiplyScalar(m?.25:0),a.object!==t&&a.attach(t),s.render(d,c),g.end()}
//# sourceMappingURL=shapecast-YtPvDHDW.js.map
