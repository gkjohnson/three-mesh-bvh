{"version":3,"file":"TransformControls-DGYuTlwP.js","sources":["../../../node_modules/three/examples/jsm/controls/TransformControls.js"],"sourcesContent":["import {\n\tBoxGeometry,\n\tBufferGeometry,\n\tControls,\n\tCylinderGeometry,\n\tDoubleSide,\n\tEuler,\n\tFloat32BufferAttribute,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tOctahedronGeometry,\n\tPlaneGeometry,\n\tQuaternion,\n\tRaycaster,\n\tSphereGeometry,\n\tTorusGeometry,\n\tVector3\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n\tX: new Vector3( 1, 0, 0 ),\n\tY: new Vector3( 0, 1, 0 ),\n\tZ: new Vector3( 0, 0, 1 )\n};\n\n/**\n * Fires if any type of change (object or property change) is performed. Property changes\n * are separate events you can add event listeners to. The event type is \"propertyname-changed\".\n *\n * @event TransformControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires if a pointer (mouse/touch) becomes active.\n *\n * @event TransformControls#mouseDown\n * @type {Object}\n */\nconst _mouseDownEvent = { type: 'mouseDown', mode: null };\n\n/**\n * Fires if a pointer (mouse/touch) is no longer active.\n *\n * @event TransformControls#mouseUp\n * @type {Object}\n */\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\n\n/**\n * Fires if the controlled 3D object is changed.\n *\n * @event TransformControls#objectChange\n * @type {Object}\n */\nconst _objectChangeEvent = { type: 'objectChange' };\n\n/**\n * This class can be used to transform objects in 3D space by adapting a similar interaction model\n * of DCC tools like Blender. Unlike other controls, it is not intended to transform the scene's camera.\n *\n * `TransformControls` expects that its attached 3D object is part of the scene graph.\n *\n * @augments Controls\n * @three_import import { TransformControls } from 'three/addons/controls/TransformControls.js';\n */\nclass TransformControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera of the rendered scene.\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( undefined, domElement );\n\n\t\tconst root = new TransformControlsRoot( this );\n\t\tthis._root = root;\n\n\t\tconst gizmo = new TransformControlsGizmo();\n\t\tthis._gizmo = gizmo;\n\t\troot.add( gizmo );\n\n\t\tconst plane = new TransformControlsPlane();\n\t\tthis._plane = plane;\n\t\troot.add( plane );\n\n\t\tconst scope = this;\n\n\t\t// Defined getter, setter and store for a property\n\t\tfunction defineProperty( propName, defaultValue ) {\n\n\t\t\tlet propValue = defaultValue;\n\n\t\t\tObject.defineProperty( scope, propName, {\n\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tif ( propValue !== value ) {\n\n\t\t\t\t\t\tpropValue = value;\n\t\t\t\t\t\tplane[ propName ] = value;\n\t\t\t\t\t\tgizmo[ propName ] = value;\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: propName + '-changed', value: value } );\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tscope[ propName ] = defaultValue;\n\t\t\tplane[ propName ] = defaultValue;\n\t\t\tgizmo[ propName ] = defaultValue;\n\n\t\t}\n\n\t\t// Define properties with getters/setter\n\t\t// Setting the defined property will automatically trigger change event\n\t\t// Defined properties are passed down to gizmo and plane\n\n\t\t/**\n\t\t * The camera of the rendered scene.\n\t\t *\n\t\t * @name TransformControls#camera\n\t\t * @type {Camera}\n\t\t */\n\t\tdefineProperty( 'camera', camera );\n\t\tdefineProperty( 'object', undefined );\n\t\tdefineProperty( 'enabled', true );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#axis\n\t\t * @type {string}\n\t\t */\n\t\tdefineProperty( 'axis', null );\n\n\t\t/**\n\t\t * The current transformation axis.\n\t\t *\n\t\t * @name TransformControls#mode\n\t\t * @type {('translate'|'rotate'|'scale')}\n\t\t * @default 'translate'\n\t\t */\n\t\tdefineProperty( 'mode', 'translate' );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously translated. If you set this property to a numeric\n\t\t * value (world units), you can define in which steps the 3D object should be translated.\n\t\t *\n\t\t * @name TransformControls#translationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'translationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously rotated. If you set this property to a numeric\n\t\t * value (radians), you can define in which steps the 3D object should be rotated.\n\t\t *\n\t\t * @name TransformControls#rotationSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'rotationSnap', null );\n\n\t\t/**\n\t\t * By default, 3D objects are continuously scaled. If you set this property to a numeric\n\t\t * value, you can define in which steps the 3D object should be scaled.\n\t\t *\n\t\t * @name TransformControls#scaleSnap\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tdefineProperty( 'scaleSnap', null );\n\n\t\t/**\n\t\t * Defines in which coordinate space transformations should be performed.\n\t\t *\n\t\t * @name TransformControls#space\n\t\t * @type {('world'|'local')}\n\t\t * @default 'world'\n\t\t */\n\t\tdefineProperty( 'space', 'world' );\n\n\t\t/**\n\t\t * The size of the helper UI (axes/planes).\n\t\t *\n\t\t * @name TransformControls#size\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tdefineProperty( 'size', 1 );\n\n\t\t/**\n\t\t * Whether dragging is currently performed or not.\n\t\t *\n\t\t * @name TransformControls#dragging\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tdefineProperty( 'dragging', false );\n\n\t\t/**\n\t\t * Whether the x-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showX\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showX', true );\n\n\t\t/**\n\t\t * Whether the y-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showY\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showY', true );\n\n\t\t/**\n\t\t * Whether the z-axis helper should be visible or not.\n\t\t *\n\t\t * @name TransformControls#showZ\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tdefineProperty( 'showZ', true );\n\n\t\t/**\n\t\t * The minimum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#minX\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minX', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed X position during translation.\n\t\t *\n\t\t * @name TransformControls#maxX\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxX', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed y position during translation.\n\t\t *\n\t\t * @name TransformControls#minY\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minY', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Y position during translation.\n\t\t *\n\t\t * @name TransformControls#maxY\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxY', Infinity );\n\n\t\t/**\n\t\t * The minimum allowed z position during translation.\n\t\t *\n\t\t * @name TransformControls#minZ\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tdefineProperty( 'minZ', - Infinity );\n\n\t\t/**\n\t\t * The maximum allowed Z position during translation.\n\t\t *\n\t\t * @name TransformControls#maxZ\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tdefineProperty( 'maxZ', Infinity );\n\n\t\t// Reusable utility variables\n\n\t\tconst worldPosition = new Vector3();\n\t\tconst worldPositionStart = new Vector3();\n\t\tconst worldQuaternion = new Quaternion();\n\t\tconst worldQuaternionStart = new Quaternion();\n\t\tconst cameraPosition = new Vector3();\n\t\tconst cameraQuaternion = new Quaternion();\n\t\tconst pointStart = new Vector3();\n\t\tconst pointEnd = new Vector3();\n\t\tconst rotationAxis = new Vector3();\n\t\tconst rotationAngle = 0;\n\t\tconst eye = new Vector3();\n\n\t\t// TODO: remove properties unused in plane and gizmo\n\n\t\tdefineProperty( 'worldPosition', worldPosition );\n\t\tdefineProperty( 'worldPositionStart', worldPositionStart );\n\t\tdefineProperty( 'worldQuaternion', worldQuaternion );\n\t\tdefineProperty( 'worldQuaternionStart', worldQuaternionStart );\n\t\tdefineProperty( 'cameraPosition', cameraPosition );\n\t\tdefineProperty( 'cameraQuaternion', cameraQuaternion );\n\t\tdefineProperty( 'pointStart', pointStart );\n\t\tdefineProperty( 'pointEnd', pointEnd );\n\t\tdefineProperty( 'rotationAxis', rotationAxis );\n\t\tdefineProperty( 'rotationAngle', rotationAngle );\n\t\tdefineProperty( 'eye', eye );\n\n\t\tthis._offset = new Vector3();\n\t\tthis._startNorm = new Vector3();\n\t\tthis._endNorm = new Vector3();\n\t\tthis._cameraScale = new Vector3();\n\n\t\tthis._parentPosition = new Vector3();\n\t\tthis._parentQuaternion = new Quaternion();\n\t\tthis._parentQuaternionInv = new Quaternion();\n\t\tthis._parentScale = new Vector3();\n\n\t\tthis._worldScaleStart = new Vector3();\n\t\tthis._worldQuaternionInv = new Quaternion();\n\t\tthis._worldScale = new Vector3();\n\n\t\tthis._positionStart = new Vector3();\n\t\tthis._quaternionStart = new Quaternion();\n\t\tthis._scaleStart = new Vector3();\n\n\t\tthis._getPointer = getPointer.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerHover = onPointerHover.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\t/**\n\t * Returns the visual representation of the controls. Add the helper to your scene to\n\t * visually transform the attached  3D object.\n\t *\n\t * @return {TransformControlsRoot} The helper.\n\t */\n\tgetHelper() {\n\n\t\treturn this._root;\n\n\t}\n\n\tpointerHover( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst intersect = intersectObjectWithRay( this._gizmo.picker[ this.mode ], _raycaster );\n\n\t\tif ( intersect ) {\n\n\t\t\tthis.axis = intersect.object.name;\n\n\t\t} else {\n\n\t\t\tthis.axis = null;\n\n\t\t}\n\n\t}\n\n\tpointerDown( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer != null && pointer.button !== 0 ) ) return;\n\n\t\tif ( this.axis !== null ) {\n\n\t\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\t\tif ( planeIntersect ) {\n\n\t\t\t\tthis.object.updateMatrixWorld();\n\t\t\t\tthis.object.parent.updateMatrixWorld();\n\n\t\t\t\tthis._positionStart.copy( this.object.position );\n\t\t\t\tthis._quaternionStart.copy( this.object.quaternion );\n\t\t\t\tthis._scaleStart.copy( this.object.scale );\n\n\t\t\t\tthis.object.matrixWorld.decompose( this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart );\n\n\t\t\t\tthis.pointStart.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\t\t\t_mouseDownEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseDownEvent );\n\n\t\t}\n\n\t}\n\n\tpointerMove( pointer ) {\n\n\t\tconst axis = this.axis;\n\t\tconst mode = this.mode;\n\t\tconst object = this.object;\n\t\tlet space = this.space;\n\n\t\tif ( mode === 'scale' ) {\n\n\t\t\tspace = 'local';\n\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\n\n\t\t\tspace = 'world';\n\n\t\t}\n\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer !== null && pointer.button !== - 1 ) ) return;\n\n\t\tif ( pointer !== null ) _raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\tif ( ! planeIntersect ) return;\n\n\t\tthis.pointEnd.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\tif ( mode === 'translate' ) {\n\n\t\t\t// Apply translate\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t}\n\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) this._offset.x = 0;\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) this._offset.y = 0;\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) this._offset.z = 0;\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._quaternionStart ).divide( this._parentScale );\n\n\t\t\t} else {\n\n\t\t\t\tthis._offset.applyQuaternion( this._parentQuaternionInv ).divide( this._parentScale );\n\n\t\t\t}\n\n\t\t\tobject.position.copy( this._offset ).add( this._positionStart );\n\n\t\t\t// Apply translation snap\n\n\t\t\tif ( this.translationSnap ) {\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( this._quaternionStart ).invert() );\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.position.applyQuaternion( this._quaternionStart );\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'world' ) {\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobject.position.x = Math.max( this.minX, Math.min( this.maxX, object.position.x ) );\n\t\t\tobject.position.y = Math.max( this.minY, Math.min( this.maxY, object.position.y ) );\n\t\t\tobject.position.z = Math.max( this.minZ, Math.min( this.maxZ, object.position.z ) );\n\n\t\t} else if ( mode === 'scale' ) {\n\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\n\n\t\t\t\tlet d = this.pointEnd.length() / this.pointStart.length();\n\n\t\t\t\tif ( this.pointEnd.dot( this.pointStart ) < 0 ) d *= - 1;\n\n\t\t\t\t_tempVector2.set( d, d, d );\n\n\t\t\t} else {\n\n\t\t\t\t_tempVector.copy( this.pointStart );\n\t\t\t\t_tempVector2.copy( this.pointEnd );\n\n\t\t\t\t_tempVector.applyQuaternion( this._worldQuaternionInv );\n\t\t\t\t_tempVector2.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t\t_tempVector2.divide( _tempVector );\n\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.x = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.y = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.z = 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply scale\n\n\t\t\tobject.scale.copy( this._scaleStart ).multiply( _tempVector2 );\n\n\t\t\tif ( this.scaleSnap ) {\n\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'rotate' ) {\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tconst ROTATION_SPEED = 20 / this.worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\n\n\t\t\tlet _inPlaneRotation = false;\n\n\t\t\tif ( axis === 'XYZE' ) {\n\n\t\t\t\tthis.rotationAxis.copy( this._offset ).cross( this.eye ).normalize();\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.copy( this.rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\n\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\n\n\t\t\t\tthis.rotationAxis.copy( _unit[ axis ] );\n\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_tempVector.cross( this.eye );\n\n\t\t\t\t// When _tempVector is 0 after cross with this.eye the vectors are parallel and should use in-plane rotation logic.\n\t\t\t\tif ( _tempVector.length() === 0 ) {\n\n\t\t\t\t\t_inPlaneRotation = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.normalize() ) * ROTATION_SPEED;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tif ( axis === 'E' || _inPlaneRotation ) {\n\n\t\t\t\tthis.rotationAxis.copy( this.eye );\n\t\t\t\tthis.rotationAngle = this.pointEnd.angleTo( this.pointStart );\n\n\t\t\t\tthis._startNorm.copy( this.pointStart ).normalize();\n\t\t\t\tthis._endNorm.copy( this.pointEnd ).normalize();\n\n\t\t\t\tthis.rotationAngle *= ( this._endNorm.cross( this._startNorm ).dot( this.eye ) < 0 ? 1 : - 1 );\n\n\t\t\t}\n\n\t\t\t// Apply rotation snap\n\n\t\t\tif ( this.rotationSnap ) this.rotationAngle = Math.round( this.rotationAngle / this.rotationSnap ) * this.rotationSnap;\n\n\t\t\t// Apply rotate\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\n\n\t\t\t\tobject.quaternion.copy( this._quaternionStart );\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) ).normalize();\n\n\t\t\t} else {\n\n\t\t\t\tthis.rotationAxis.applyQuaternion( this._parentQuaternionInv );\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) );\n\t\t\t\tobject.quaternion.multiply( this._quaternionStart ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t}\n\n\tpointerUp( pointer ) {\n\n\t\tif ( pointer !== null && pointer.button !== 0 ) return;\n\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\n\n\t\t\t_mouseUpEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseUpEvent );\n\n\t\t}\n\n\t\tthis.dragging = false;\n\t\tthis.axis = null;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t\tthis._root.dispose();\n\n\t}\n\n\t/**\n\t * Sets the 3D object that should be transformed and ensures the controls UI is visible.\n\t *\n\t * @param {Object3D} object -  The 3D object that should be transformed.\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tattach( object ) {\n\n\t\tthis.object = object;\n\t\tthis._root.visible = true;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Removes the current 3D object from the controls and makes the helper UI invisible.\n\t *\n\t * @return {TransformControls} A reference to this controls.\n\t */\n\tdetach() {\n\n\t\tthis.object = undefined;\n\t\tthis.axis = null;\n\n\t\tthis._root.visible = false;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets the object's position, rotation and scale to when the current transform began.\n\t */\n\treset() {\n\n\t\tif ( ! this.enabled ) return;\n\n\t\tif ( this.dragging ) {\n\n\t\t\tthis.object.position.copy( this._positionStart );\n\t\t\tthis.object.quaternion.copy( this._quaternionStart );\n\t\t\tthis.object.scale.copy( this._scaleStart );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t\t\tthis.pointStart.copy( this.pointEnd );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `TransformControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\t/**\n\t * Returns the transformation mode.\n\t *\n\t * @returns {'translate'|'rotate'|'scale'} The transformation mode.\n\t */\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\t/**\n\t * Sets the given transformation mode.\n\t *\n\t * @param {'translate'|'rotate'|'scale'} mode - The transformation mode to set.\n\t */\n\tsetMode( mode ) {\n\n\t\tthis.mode = mode;\n\n\t}\n\n\t/**\n\t * Sets the translation snap.\n\t *\n\t * @param {?number} translationSnap - The translation snap to set.\n\t */\n\tsetTranslationSnap( translationSnap ) {\n\n\t\tthis.translationSnap = translationSnap;\n\n\t}\n\n\t/**\n\t * Sets the rotation snap.\n\t *\n\t * @param {?number} rotationSnap - The rotation snap to set.\n\t */\n\tsetRotationSnap( rotationSnap ) {\n\n\t\tthis.rotationSnap = rotationSnap;\n\n\t}\n\n\t/**\n\t * Sets the scale snap.\n\t *\n\t * @param {?number} scaleSnap - The scale snap to set.\n\t */\n\tsetScaleSnap( scaleSnap ) {\n\n\t\tthis.scaleSnap = scaleSnap;\n\n\t}\n\n\t/**\n\t * Sets the size of the helper UI.\n\t *\n\t * @param {number} size - The size to set.\n\t */\n\tsetSize( size ) {\n\n\t\tthis.size = size;\n\n\t}\n\n\t/**\n\t * Sets the coordinate space in which transformations are applied.\n\t *\n\t * @param {'world'|'local'} space - The space to set.\n\t */\n\tsetSpace( space ) {\n\n\t\tthis.space = space;\n\n\t}\n\n\t/**\n\t * Sets the colors of the control's gizmo.\n\t *\n\t * @param {number|Color|string} xAxis - The x-axis color.\n\t * @param {number|Color|string} yAxis - The y-axis color.\n\t * @param {number|Color|string} zAxis - The z-axis color.\n\t * @param {number|Color|string} active - The color for active elements.\n\t */\n\tsetColors( xAxis, yAxis, zAxis, active ) {\n\n\t\tconst materialLib = this._gizmo.materialLib;\n\n\t\tmaterialLib.xAxis.color.set( xAxis );\n\t\tmaterialLib.yAxis.color.set( yAxis );\n\t\tmaterialLib.zAxis.color.set( zAxis );\n\t\tmaterialLib.active.color.set( active );\n\t\tmaterialLib.xAxisTransparent.color.set( xAxis );\n\t\tmaterialLib.yAxisTransparent.color.set( yAxis );\n\t\tmaterialLib.zAxisTransparent.color.set( zAxis );\n\t\tmaterialLib.activeTransparent.color.set( active );\n\n\t\t// update color caches\n\n\t\tif ( materialLib.xAxis._color ) materialLib.xAxis._color.set( xAxis );\n\t\tif ( materialLib.yAxis._color ) materialLib.yAxis._color.set( yAxis );\n\t\tif ( materialLib.zAxis._color ) materialLib.zAxis._color.set( zAxis );\n\t\tif ( materialLib.active._color ) materialLib.active._color.set( active );\n\t\tif ( materialLib.xAxisTransparent._color ) materialLib.xAxisTransparent._color.set( xAxis );\n\t\tif ( materialLib.yAxisTransparent._color ) materialLib.yAxisTransparent._color.set( yAxis );\n\t\tif ( materialLib.zAxisTransparent._color ) materialLib.zAxisTransparent._color.set( zAxis );\n\t\tif ( materialLib.activeTransparent._color ) materialLib.activeTransparent._color.set( active );\n\n\t}\n\n}\n\n// mouse / touch event handlers\n\nfunction getPointer( event ) {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement ) {\n\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tbutton: event.button\n\t\t};\n\n\t} else {\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\tx: ( event.clientX - rect.left ) / rect.width * 2 - 1,\n\t\t\ty: - ( event.clientY - rect.top ) / rect.height * 2 + 1,\n\t\t\tbutton: event.button\n\t\t};\n\n\t}\n\n}\n\nfunction onPointerHover( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tswitch ( event.pointerType ) {\n\n\t\tcase 'mouse':\n\t\tcase 'pen':\n\t\t\tthis.pointerHover( this._getPointer( event ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tif ( ! document.pointerLockElement ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t}\n\n\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerHover( this._getPointer( event ) );\n\tthis.pointerDown( this._getPointer( event ) );\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.pointerMove( this._getPointer( event ) );\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerUp( this._getPointer( event ) );\n\n}\n\nfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\n\n\tconst allIntersections = raycaster.intersectObject( object, true );\n\n\tfor ( let i = 0; i < allIntersections.length; i ++ ) {\n\n\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\n\n\t\t\treturn allIntersections[ i ];\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3( 0, 1, 0 );\nconst _zeroVector = new Vector3( 0, 0, 0 );\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3( 1, 0, 0 );\nconst _unitY = new Vector3( 0, 1, 0 );\nconst _unitZ = new Vector3( 0, 0, 1 );\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsRoot extends Object3D {\n\n\tconstructor( controls ) {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsRoot = true;\n\n\t\tthis.controls = controls;\n\t\tthis.visible = false;\n\n\t}\n\n\t// updateMatrixWorld updates key transformation variables\n\tupdateMatrixWorld( force ) {\n\n\t\tconst controls = this.controls;\n\n\t\tif ( controls.object !== undefined ) {\n\n\t\t\tcontrols.object.updateMatrixWorld();\n\n\t\t\tif ( controls.object.parent === null ) {\n\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\n\n\t\t\t} else {\n\n\t\t\t\tcontrols.object.parent.matrixWorld.decompose( controls._parentPosition, controls._parentQuaternion, controls._parentScale );\n\n\t\t\t}\n\n\t\t\tcontrols.object.matrixWorld.decompose( controls.worldPosition, controls.worldQuaternion, controls._worldScale );\n\n\t\t\tcontrols._parentQuaternionInv.copy( controls._parentQuaternion ).invert();\n\t\t\tcontrols._worldQuaternionInv.copy( controls.worldQuaternion ).invert();\n\n\t\t}\n\n\t\tcontrols.camera.updateMatrixWorld();\n\t\tcontrols.camera.matrixWorld.decompose( controls.cameraPosition, controls.cameraQuaternion, controls._cameraScale );\n\n\t\tif ( controls.camera.isOrthographicCamera ) {\n\n\t\t\tcontrols.camera.getWorldDirection( controls.eye ).negate();\n\n\t\t} else {\n\n\t\t\tcontrols.eye.copy( controls.cameraPosition ).sub( controls.worldPosition ).normalize();\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.traverse( function ( child ) {\n\n\t\t\tif ( child.geometry ) child.geometry.dispose();\n\t\t\tif ( child.material ) child.material.dispose();\n\n\t\t} );\n\n\t}\n\n}\n\nclass TransformControlsGizmo extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsGizmo = true;\n\n\t\tthis.type = 'TransformControlsGizmo';\n\n\t\t// shared materials\n\n\t\tconst gizmoMaterial = new MeshBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tconst gizmoLineMaterial = new LineBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\t// Make unique material for each axis/color\n\n\t\tconst matInvisible = gizmoMaterial.clone();\n\t\tmatInvisible.opacity = 0.15;\n\n\t\tconst matHelper = gizmoLineMaterial.clone();\n\t\tmatHelper.opacity = 0.5;\n\n\t\tconst matRed = gizmoMaterial.clone();\n\t\tmatRed.color.setHex( 0xff0000 );\n\n\t\tconst matGreen = gizmoMaterial.clone();\n\t\tmatGreen.color.setHex( 0x00ff00 );\n\n\t\tconst matBlue = gizmoMaterial.clone();\n\t\tmatBlue.color.setHex( 0x0000ff );\n\n\t\tconst matRedTransparent = gizmoMaterial.clone();\n\t\tmatRedTransparent.color.setHex( 0xff0000 );\n\t\tmatRedTransparent.opacity = 0.5;\n\n\t\tconst matGreenTransparent = gizmoMaterial.clone();\n\t\tmatGreenTransparent.color.setHex( 0x00ff00 );\n\t\tmatGreenTransparent.opacity = 0.5;\n\n\t\tconst matBlueTransparent = gizmoMaterial.clone();\n\t\tmatBlueTransparent.color.setHex( 0x0000ff );\n\t\tmatBlueTransparent.opacity = 0.5;\n\n\t\tconst matWhiteTransparent = gizmoMaterial.clone();\n\t\tmatWhiteTransparent.opacity = 0.25;\n\n\t\tconst matYellowTransparent = gizmoMaterial.clone();\n\t\tmatYellowTransparent.color.setHex( 0xffff00 );\n\t\tmatYellowTransparent.opacity = 0.25;\n\n\t\tconst matYellow = gizmoMaterial.clone();\n\t\tmatYellow.color.setHex( 0xffff00 );\n\n\t\tconst matGray = gizmoMaterial.clone();\n\t\tmatGray.color.setHex( 0x787878 );\n\n\t\t// materials in the below property are configurable via setColors()\n\n\t\tthis.materialLib = {\n\t\t\txAxis: matRed,\n\t\t\tyAxis: matGreen,\n\t\t\tzAxis: matBlue,\n\t\t\tactive: matYellow,\n\t\t\txAxisTransparent: matRedTransparent,\n\t\t\tyAxisTransparent: matGreenTransparent,\n\t\t\tzAxisTransparent: matBlueTransparent,\n\t\t\tactiveTransparent: matYellowTransparent\n\t\t};\n\n\t\t// reusable geometry\n\n\t\tconst arrowGeometry = new CylinderGeometry( 0, 0.04, 0.1, 12 );\n\t\tarrowGeometry.translate( 0, 0.05, 0 );\n\n\t\tconst scaleHandleGeometry = new BoxGeometry( 0.08, 0.08, 0.08 );\n\t\tscaleHandleGeometry.translate( 0, 0.04, 0 );\n\n\t\tconst lineGeometry = new BufferGeometry();\n\t\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\n\n\t\tconst lineGeometry2 = new CylinderGeometry( 0.0075, 0.0075, 0.5, 3 );\n\t\tlineGeometry2.translate( 0, 0.25, 0 );\n\n\t\tfunction CircleGeometry( radius, arc ) {\n\n\t\t\tconst geometry = new TorusGeometry( radius, 0.0075, 3, 64, arc * Math.PI * 2 );\n\t\t\tgeometry.rotateY( Math.PI / 2 );\n\t\t\tgeometry.rotateX( Math.PI / 2 );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n\t\tfunction TranslateHelperGeometry() {\n\n\t\t\tconst geometry = new BufferGeometry();\n\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n\t\tconst gizmoTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, - 0.5, 0 ], [ Math.PI, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), null, [ Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.1, 0 ), matWhiteTransparent ), [ 0, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.2, 0 ), matInvisible ) ]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperTranslate = {\n\t\t\tSTART: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tEND: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tDELTA: [\n\t\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 1 ), matGray ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matRed ) ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matGreen ), null, [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matBlue ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.75, 1 ), matYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperRotate = {\n\t\t\tAXIS: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( new SphereGeometry( 0.25, 10, 8 ), matInvisible ) ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.75, 0.1, 2, 24 ), matInvisible ) ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, - 0.5, 0 ], [ 0, 0, Math.PI ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.1, 0.1, 0.1 ), matWhiteTransparent ) ],\n\t\t\t]\n\t\t};\n\n\t\tconst pickerScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]],\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 0 ]],\n\t\t\t]\n\t\t};\n\n\t\tconst helperScale = {\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\t// Creates an Object3D with gizmos described in custom hierarchy definition.\n\n\t\tfunction setupGizmo( gizmoMap ) {\n\n\t\t\tconst gizmo = new Object3D();\n\n\t\t\tfor ( const name in gizmoMap ) {\n\n\t\t\t\tfor ( let i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\t\tconst object = gizmoMap[ name ][ i ][ 0 ].clone();\n\t\t\t\t\tconst position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\t\tconst rotation = gizmoMap[ name ][ i ][ 2 ];\n\t\t\t\t\tconst scale = gizmoMap[ name ][ i ][ 3 ];\n\t\t\t\t\tconst tag = gizmoMap[ name ][ i ][ 4 ];\n\n\t\t\t\t\t// name and tag properties are essential for picking and updating logic.\n\t\t\t\t\tobject.name = name;\n\t\t\t\t\tobject.tag = tag;\n\n\t\t\t\t\tif ( position ) {\n\n\t\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( rotation ) {\n\n\t\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scale ) {\n\n\t\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tconst tempGeometry = object.geometry.clone();\n\t\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\n\t\t\t\t\tobject.geometry = tempGeometry;\n\t\t\t\t\tobject.renderOrder = Infinity;\n\n\t\t\t\t\tobject.position.set( 0, 0, 0 );\n\t\t\t\t\tobject.rotation.set( 0, 0, 0 );\n\t\t\t\t\tobject.scale.set( 1, 1, 1 );\n\n\t\t\t\t\tgizmo.add( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn gizmo;\n\n\t\t}\n\n\t\t// Gizmo creation\n\n\t\tthis.gizmo = {};\n\t\tthis.picker = {};\n\t\tthis.helper = {};\n\n\t\tthis.add( this.gizmo[ 'translate' ] = setupGizmo( gizmoTranslate ) );\n\t\tthis.add( this.gizmo[ 'rotate' ] = setupGizmo( gizmoRotate ) );\n\t\tthis.add( this.gizmo[ 'scale' ] = setupGizmo( gizmoScale ) );\n\t\tthis.add( this.picker[ 'translate' ] = setupGizmo( pickerTranslate ) );\n\t\tthis.add( this.picker[ 'rotate' ] = setupGizmo( pickerRotate ) );\n\t\tthis.add( this.picker[ 'scale' ] = setupGizmo( pickerScale ) );\n\t\tthis.add( this.helper[ 'translate' ] = setupGizmo( helperTranslate ) );\n\t\tthis.add( this.helper[ 'rotate' ] = setupGizmo( helperRotate ) );\n\t\tthis.add( this.helper[ 'scale' ] = setupGizmo( helperScale ) );\n\n\t\t// Pickers should be hidden always\n\n\t\tthis.picker[ 'translate' ].visible = false;\n\t\tthis.picker[ 'rotate' ].visible = false;\n\t\tthis.picker[ 'scale' ].visible = false;\n\n\t}\n\n\t// updateMatrixWorld will update transformations and appearance of individual handles\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst space = ( this.mode === 'scale' ) ? 'local' : this.space; // scale always oriented to local rotation\n\n\t\tconst quaternion = ( space === 'local' ) ? this.worldQuaternion : _identityQuaternion;\n\n\t\t// Show only gizmos for current transform mode\n\n\t\tthis.gizmo[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.gizmo[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.gizmo[ 'scale' ].visible = this.mode === 'scale';\n\n\t\tthis.helper[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.helper[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.helper[ 'scale' ].visible = this.mode === 'scale';\n\n\n\t\tlet handles = [];\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\n\n\t\tfor ( let i = 0; i < handles.length; i ++ ) {\n\n\t\t\tconst handle = handles[ i ];\n\n\t\t\t// hide aligned to camera\n\n\t\t\thandle.visible = true;\n\t\t\thandle.rotation.set( 0, 0, 0 );\n\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\tlet factor;\n\n\t\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\n\n\t\t\t} else {\n\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\n\n\t\t\t}\n\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 4 );\n\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\n\n\t\t\tif ( handle.tag === 'helper' ) {\n\n\t\t\t\thandle.visible = false;\n\n\t\t\t\tif ( handle.name === 'AXIS' ) {\n\n\t\t\t\t\thandle.visible = !! this.axis;\n\n\t\t\t\t\tif ( this.axis === 'X' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Y' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, Math.PI / 2 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Z' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\t_alignVector.copy( this.rotationAxis );\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( _zeroVector, _alignVector, _unitY ) );\n\t\t\t\t\t\thandle.quaternion.multiply( _tempQuaternion );\n\t\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'E' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if ( handle.name === 'START' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'END' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPosition );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\n\t\t\t\t\t_tempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternionStart.clone().invert() );\n\t\t\t\t\thandle.scale.copy( _tempVector );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\t\t\tif ( this.dragging ) {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis ) {\n\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// If updating helper, skip rest of the loop\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// Align handles to current local or world rotation\n\n\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\n\n\t\t\t\t// Hide translate and scale axis facing the camera\n\n\t\t\t\tconst AXIS_HIDE_THRESHOLD = 0.99;\n\t\t\t\tconst PLANE_HIDE_THRESHOLD = 0.2;\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XY' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'YZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.mode === 'rotate' ) {\n\n\t\t\t\t// Align handles to current local or world rotation\n\n\t\t\t\t_tempQuaternion2.copy( quaternion );\n\t\t\t\t_alignVector.copy( this.eye ).applyQuaternion( _tempQuaternion.copy( quaternion ).invert() );\n\n\t\t\t\tif ( handle.name.search( 'E' ) !== - 1 ) {\n\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( this.eye, _zeroVector, _unitY ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitX, Math.atan2( - _alignVector.y, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitY, Math.atan2( _alignVector.x, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitZ, Math.atan2( _alignVector.y, _alignVector.x ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Hide disabled axes\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'X' ) === - 1 || this.showX );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Y' ) === - 1 || this.showY );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Z' ) === - 1 || this.showZ );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'E' ) === - 1 || ( this.showX && this.showY && this.showZ ) );\n\n\t\t\t// highlight selected axis\n\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n\t\t\thandle.material.color.copy( handle.material._color );\n\t\t\thandle.material.opacity = handle.material._opacity;\n\n\t\t\tif ( this.enabled && this.axis ) {\n\n\t\t\t\tif ( handle.name === this.axis ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\n\n\t\t\t\t\treturn handle.name === a;\n\n\t\t\t\t} ) ) {\n\n\t\t\t\t\thandle.material.color.copy( this.materialLib.active.color );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n\tconstructor() {\n\n\t\tsuper(\n\t\t\tnew PlaneGeometry( 100000, 100000, 2, 2 ),\n\t\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\n\t\t);\n\n\t\tthis.isTransformControlsPlane = true;\n\n\t\tthis.type = 'TransformControlsPlane';\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tlet space = this.space;\n\n\t\tthis.position.copy( this.worldPosition );\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\t_v1.copy( _unitX ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v2.copy( _unitY ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v3.copy( _unitZ ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\n\t\t// Align the plane for current transform mode, axis and space.\n\n\t\t_alignVector.copy( _v2 );\n\n\t\tswitch ( this.mode ) {\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\t\t\t\tswitch ( this.axis ) {\n\n\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v1 );\n\t\t\t\t\t\t_dirVector.copy( _v1 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v2 );\n\t\t\t\t\t\t_dirVector.copy( _v2 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v3 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XY':\n\t\t\t\t\t\t_dirVector.copy( _v3 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'YZ':\n\t\t\t\t\t\t_dirVector.copy( _v1 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XZ':\n\t\t\t\t\t\t_alignVector.copy( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v2 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XYZ':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\t\t_dirVector.set( 0, 0, 0 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'rotate':\n\t\t\tdefault:\n\t\t\t\t// special case for rotate\n\t\t\t\t_dirVector.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( _dirVector.length() === 0 ) {\n\n\t\t\t// If in rotate mode, make the plane parallel to camera\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\n\n\t\t} else {\n\n\t\t\t_tempMatrix.lookAt( _tempVector.set( 0, 0, 0 ), _dirVector, _alignVector );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( _tempMatrix );\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n"],"names":["_raycaster","Raycaster","_tempVector","Vector3","_tempVector2","_tempQuaternion","Quaternion","_unit","_changeEvent","_mouseDownEvent","_mouseUpEvent","_objectChangeEvent","TransformControls","Controls","camera","domElement","root","TransformControlsRoot","gizmo","TransformControlsGizmo","plane","TransformControlsPlane","scope","defineProperty","propName","defaultValue","propValue","value","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","rotationAngle","eye","getPointer","onPointerDown","onPointerHover","onPointerMove","onPointerUp","element","pointer","intersect","intersectObjectWithRay","planeIntersect","axis","mode","object","space","d","ROTATION_SPEED","_inPlaneRotation","translationSnap","rotationSnap","scaleSnap","size","xAxis","yAxis","zAxis","active","materialLib","event","rect","raycaster","includeInvisible","allIntersections","_tempEuler","Euler","_alignVector","_zeroVector","_lookAtMatrix","Matrix4","_tempQuaternion2","_identityQuaternion","_dirVector","_tempMatrix","_unitX","_unitY","_unitZ","_v1","_v2","_v3","Object3D","controls","force","child","gizmoMaterial","MeshBasicMaterial","gizmoLineMaterial","LineBasicMaterial","matInvisible","matHelper","matRed","matGreen","matBlue","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","CylinderGeometry","scaleHandleGeometry","BoxGeometry","lineGeometry","BufferGeometry","Float32BufferAttribute","lineGeometry2","CircleGeometry","radius","arc","geometry","TorusGeometry","TranslateHelperGeometry","gizmoTranslate","Mesh","OctahedronGeometry","pickerTranslate","helperTranslate","Line","gizmoRotate","helperRotate","pickerRotate","SphereGeometry","gizmoScale","pickerScale","helperScale","setupGizmo","gizmoMap","name","i","position","rotation","scale","tag","tempGeometry","quaternion","handles","handle","factor","a","PlaneGeometry","DoubleSide"],"mappings":"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","x_google_ignoreList":[0]}