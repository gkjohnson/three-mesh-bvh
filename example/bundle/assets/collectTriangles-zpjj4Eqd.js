import{M as L,i as H,J as R,W as N,c as P,d as G,D as I,A as j,T as U,B as V,u as X,g as D,e as Y,P as k,k as O,n as F,K,V as J}from"./ExtendedTriangle-hsPasuNU.js";import{S as Z}from"./Stats-9dH8FB2H.js";import{g as _}from"./lil-gui.module.min-BH_YJbPT.js";import{O as q}from"./OrbitControls-DEZHvbFX.js";import{I as W,a as Q,N as $}from"./MeshBVH-DQV6PBDm.js";import{a as ee,c as te,d as ne}from"./ExtensionUtilities-BlnM4xb7.js";L.prototype.raycast=ee;H.prototype.computeBoundsTree=te;H.prototype.disposeBoundsTree=ne;const d={size:.1,rotate:!0};let C,w,i,o,m,l,c,y=new R,x=-1,M=!1,B;function oe(){o=new N({antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),o.setClearColor(1251612,1),o.setAnimationLoop(ie),document.body.appendChild(o.domElement),o.domElement.style.touchAction="none",w=new P,w.fog=new G(2503224/2,20,60);const E=new I(16777215,1.5);E.position.set(1,1,1),w.add(E),w.add(new j(16777215,1.2));const p=1,S=.4,T=800,u=400,h=new U(p,S,T,u).toNonIndexed(),g=new Uint8Array(h.attributes.position.count*3);g.fill(255);const a=new V(g,3,!0);a.setUsage(X),h.setAttribute("color",a);const b=new D({color:16777215,roughness:.3,metalness:0,vertexColors:!0});l=new L(h,b),l.geometry.computeBoundsTree(),w.add(l);const A=new Y(1,40,40),r=new D({color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5});c=new L(A,r),w.add(c),i=new k(75,window.innerWidth/window.innerHeight,.1,50),i.position.set(3,3,3),i.far=100,i.updateProjectionMatrix(),C=new Z,document.body.appendChild(C.dom);const n=new _;n.add(d,"size").min(.1).max(1).step(.1),n.add(d,"rotate"),n.open(),window.addEventListener("resize",function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)},!1),window.addEventListener("pointermove",function(e){y.x=e.clientX/window.innerWidth*2-1,y.y=-(e.clientY/window.innerHeight)*2+1,M=!0}),window.addEventListener("pointerdown",function(e){y.x=e.clientX/window.innerWidth*2-1,y.y=-(e.clientY/window.innerHeight)*2+1,x=e.button;const t=new O;t.setFromCamera(y,i),t.firstHitOnly=!0;const s=t.intersectObject(l,!0);M=!0,m.enabled=s.length===0},!0),window.addEventListener("pointerup",function(e){x=-1,e.pointerType==="touch"&&(M=!1)},!0),window.addEventListener("contextmenu",function(e){e.preventDefault()}),window.addEventListener("wheel",function(e){let t=e.deltaY;e.deltaMode===1&&(t*=40),e.deltaMode===2&&(t*=40),d.size+=t*5e-4,d.size=Math.max(Math.min(d.size,1),.1),n.controllersRecursive().forEach(s=>s.updateDisplay())}),m=new q(i,o.domElement),m.addEventListener("start",function(){this.active=!0}),m.addEventListener("end",function(){this.active=!1}),B=window.performance.now()}function ie(){C.begin();const v=l.geometry,E=v.boundsTree,p=v.getAttribute("color"),S=v.index;if(m.active||!M)c.visible=!1;else{c.scale.setScalar(d.size);const u=new O;u.setFromCamera(y,i),u.firstHitOnly=!0;const h=u.intersectObject(l,!0);if(h.length){c.position.copy(h[0].point),m.enabled=!1,c.visible=!0;const g=new F;g.copy(l.matrixWorld).invert();const a=new K;a.center.copy(c.position).applyMatrix4(g),a.radius=d.size;const b=[],A=new J;if(E.shapecast({intersectsBounds:r=>{const n=a.intersectsBox(r),{min:e,max:t}=r;if(n){for(let s=0;s<=1;s++)for(let f=0;f<=1;f++)for(let z=0;z<=1;z++)if(A.set(s===0?e.x:t.x,f===0?e.y:t.y,z===0?e.z:t.z),!a.containsPoint(A))return W;return Q}return n?W:$},intersectsTriangle:(r,n,e)=>{if(e||r.intersectsSphere(a)){const t=3*n;b.push(t,t+1,t+2)}return!1}}),x===0||x===2){let r=1,n=1,e=1;x===0&&(r=15/255,n=78/255,e=85/255);for(let t=0,s=b.length;t<s;t++){const f=S.getX(b[t]);p.setX(f,r),p.setY(f,n),p.setZ(f,e)}p.needsUpdate=!0}}else m.enabled=!0,c.visible=!1}const T=window.performance.now();if(d.rotate){const u=T-B;l.rotation.y+=u*.001}B=T,o.render(w,i),C.end()}oe();
//# sourceMappingURL=collectTriangles-zpjj4Eqd.js.map
