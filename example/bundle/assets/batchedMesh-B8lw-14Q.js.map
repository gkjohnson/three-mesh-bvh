{"version":3,"file":"batchedMesh-B8lw-14Q.js","sources":["../../batchedMesh.js"],"sourcesContent":["import Stats from 'stats.js';\nimport * as dat from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport * as THREE from 'three';\nimport {\n\tacceleratedRaycast, computeBoundsTree, disposeBoundsTree,\n\tcomputeBatchedBoundsTree, disposeBatchedBoundsTree,\n\tCENTER, SAH, AVERAGE,\n} from 'three-mesh-bvh';\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\nTHREE.BufferGeometry.prototype.computeBoundsTree = computeBoundsTree;\nTHREE.BufferGeometry.prototype.disposeBoundsTree = disposeBoundsTree;\n\nTHREE.BatchedMesh.prototype.raycast = acceleratedRaycast;\nTHREE.BatchedMesh.prototype.computeBoundsTree = computeBatchedBoundsTree;\nTHREE.BatchedMesh.prototype.disposeBoundsTree = disposeBatchedBoundsTree;\n\nconst bgColor = 0xcfd8dc;\nconst meshColor = 0x263238;\nconst lineColor = 0xd81b60;\n\nlet renderer, scene, stats, camera;\nlet material, containerObj, batchedMesh;\nconst rayCasterObjects = [];\n\n// Create ray casters in the scene\nconst raycaster = new THREE.Raycaster();\nconst sphere = new THREE.SphereGeometry( 0.25, 20, 20 );\nconst cylinder = new THREE.CylinderGeometry( 0.01, 0.01 );\nconst pointDist = 23;\n\nconst dolly = new THREE.Object3D();\n\n// Delta timer\nconst params = {\n\traycasters: {\n\t\tcount: 150,\n\t\tnear: 0,\n\t\tfar: pointDist\n\t},\n\n\tmesh: {\n\t\tsplitStrategy: CENTER,\n\t\tuseBoundsTree: true,\n\t\tindirect: false,\n\t}\n};\n\ninit();\nupdateFromOptions();\n\nfunction init() {\n\n\t// renderer setup\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( bgColor, 1 );\n\trenderer.setAnimationLoop( render );\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// scene setup\n\tscene = new THREE.Scene();\n\tscene.fog = new THREE.Fog( bgColor, 40, 100 );\n\n\tconst light = new THREE.DirectionalLight( 0xffffff, 1.5 );\n\tlight.position.set( 1, 1, 1 );\n\tscene.add( light );\n\tscene.add( new THREE.AmbientLight( 0xffffff, 1.2 ) );\n\n\tcontainerObj = new THREE.Object3D();\n\tmaterial = new THREE.MeshPhongMaterial( { color: meshColor } );\n\tcontainerObj.scale.multiplyScalar( 10 );\n\tcontainerObj.rotation.x = 10.989999999999943;\n\tcontainerObj.rotation.y = 10.989999999999943;\n\tscene.add( containerObj );\n\n\tcreateBatchedMesh();\n\n\t// camera setup\n\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 50 );\n\tcamera.position.z = 50;\n\tcamera.far = 100;\n\tcamera.updateProjectionMatrix();\n\n\t// stats setup\n\tstats = new Stats();\n\tdocument.body.appendChild( stats.dom );\n\n\t// Run\n\tconst gui = new dat.GUI();\n\tconst rcFolder = gui.addFolder( 'Raycasters' );\n\trcFolder.add( params.raycasters, 'count' ).min( 1 ).max( 1000 ).step( 1 ).onChange( () => updateFromOptions() );\n\trcFolder.add( params.raycasters, 'near' ).min( 0 ).max( pointDist ).onChange( () => updateFromOptions() );\n\trcFolder.add( params.raycasters, 'far' ).min( 0 ).max( pointDist ).onChange( () => updateFromOptions() );\n\trcFolder.open();\n\n\tconst meshFolder = gui.addFolder( 'Mesh' );\n\tmeshFolder.add( params.mesh, 'useBoundsTree' ).onChange( () => updateFromOptions() );\n\tmeshFolder.add( params.mesh, 'indirect' ).onChange( () => updateFromOptions() );\n\tmeshFolder.add( params.mesh, 'splitStrategy', { 'CENTER': CENTER, 'SAH': SAH, 'AVERAGE': AVERAGE } ).onChange( () => updateFromOptions() );\n\tmeshFolder.open();\n\n\twindow.addEventListener( 'resize', function () {\n\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t}, false );\n\n}\n\nfunction createBatchedMesh() {\n\n\tconst radius = 0.5;\n\n\tconst knotGeometry = new THREE.TorusKnotGeometry( radius, 0.2, 200, 100, 2, 3 );\n\tconst knot2Geometry = new THREE.TorusKnotGeometry( radius, 0.2, 200, 100, 3, 4 );\n\tconst sphereGeometry = new THREE.SphereGeometry( radius, 100, 100 );\n\n\tconst knotVertices = knotGeometry.attributes.position.count;\n\tconst knot2Vertices = knot2Geometry.attributes.position.count;\n\tconst sphereVertices = sphereGeometry.attributes.position.count;\n\tconst maxVertices = knotVertices + knot2Vertices + sphereVertices;\n\n\tconst knotIndexes = knotGeometry.index.count;\n\tconst knot2Indexes = knot2Geometry.index.count;\n\tconst sphereIndexes = sphereGeometry.index.count;\n\tconst maxIndexes = knotIndexes + knot2Indexes + sphereIndexes;\n\n\tbatchedMesh = new THREE.BatchedMesh( 3, maxVertices, maxIndexes, material );\n\n\tconst knotGeometryId = batchedMesh.addGeometry( knotGeometry );\n\tconst knot2GeometryId = batchedMesh.addGeometry( knot2Geometry );\n\tconst sphereGeometryId = batchedMesh.addGeometry( sphereGeometry );\n\n\tbatchedMesh.addInstance( knotGeometryId );\n\tbatchedMesh.addInstance( knot2GeometryId );\n\tbatchedMesh.addInstance( sphereGeometryId );\n\n\tdolly.position.x = - 1.5;\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 0, dolly.matrix );\n\n\tdolly.position.x = 0;\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 1, dolly.matrix );\n\n\tdolly.position.x = 1.5;\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 2, dolly.matrix );\n\n\tbatchedMesh.rotation.x = Math.random() * 10;\n\tbatchedMesh.rotation.y = Math.random() * 10;\n\n\tcontainerObj.add( batchedMesh );\n\n}\n\nfunction updateBatchedMeshInstances() {\n\n\tconst time = window.performance.now();\n\n\t// Instance 0: update rotation state and apply\n\tbatchedMesh.getMatrixAt( 0, dolly.matrix );\n\tdolly.matrix.decompose( dolly.position, dolly.quaternion, dolly.scale );\n\tdolly.rotation.set( 0.0003 * time, 0.0003 * time, 0 );\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 0, dolly.matrix );\n\n\t// Instance 1: update rotation state and apply\n\tbatchedMesh.getMatrixAt( 1, dolly.matrix );\n\tdolly.matrix.decompose( dolly.position, dolly.quaternion, dolly.scale );\n\tdolly.rotation.set( 0.0009 * time, 0.0009 * time, 0 );\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 1, dolly.matrix );\n\n\t// Instance 2: update rotation state and apply\n\tbatchedMesh.getMatrixAt( 2, dolly.matrix );\n\tdolly.matrix.decompose( dolly.position, dolly.quaternion, dolly.scale );\n\tdolly.rotation.set( 0.0005 * time, 0.0005 * time, 0 );\n\tdolly.updateMatrix();\n\tbatchedMesh.setMatrixAt( 2, dolly.matrix );\n\n}\n\nfunction addRaycaster() {\n\n\t// Objects\n\tconst obj = new THREE.Object3D();\n\tconst material = new THREE.MeshBasicMaterial( { color: lineColor } );\n\tconst origMesh = new THREE.Mesh( sphere, material );\n\tconst hitMesh = new THREE.Mesh( sphere, material );\n\thitMesh.scale.multiplyScalar( 0.25 );\n\torigMesh.scale.multiplyScalar( 0.5 );\n\n\tconst cylinderMesh = new THREE.Mesh( cylinder, new THREE.MeshBasicMaterial( { color: lineColor, transparent: true, opacity: 0.5 } ) );\n\n\t// Init the rotation root\n\tobj.add( cylinderMesh );\n\tobj.add( origMesh );\n\tobj.add( hitMesh );\n\tscene.add( obj );\n\n\t// set transforms\n\torigMesh.position.set( pointDist, 0, 0 );\n\tconst x = Math.random() * 10;\n\tconst y = Math.random() * 10;\n\tconst z = Math.random() * 10;\n\n\t// reusable vectors\n\tconst origVec = new THREE.Vector3();\n\tconst dirVec = new THREE.Vector3();\n\tconst xDir = ( Math.random() - 0.5 );\n\tconst yDir = ( Math.random() - 0.5 );\n\tconst zDir = ( Math.random() - 0.5 );\n\n\trayCasterObjects.push( {\n\t\tupdate: () => {\n\n\t\t\tconst time = window.performance.now();\n\t\t\tobj.rotation.x = xDir * 0.0001 * time + x;\n\t\t\tobj.rotation.y = yDir * 0.0001 * time + y;\n\t\t\tobj.rotation.z = zDir * 0.0001 * time + z;\n\n\t\t\torigMesh.updateMatrixWorld();\n\t\t\torigVec.setFromMatrixPosition( origMesh.matrixWorld );\n\t\t\tdirVec.copy( origVec ).multiplyScalar( - 1 ).normalize();\n\n\t\t\traycaster.set( origVec, dirVec );\n\t\t\traycaster.firstHitOnly = true;\n\t\t\tconst res = raycaster.intersectObject( containerObj, true );\n\t\t\tconst length = res.length ? res[ 0 ].distance : pointDist;\n\n\t\t\thitMesh.position.set( pointDist - length, 0, 0 );\n\n\t\t\tconst lineLength = res.length ? length - raycaster.near : length - raycaster.near - ( pointDist - raycaster.far );\n\n\t\t\tcylinderMesh.position.set( pointDist - raycaster.near - ( lineLength / 2 ), 0, 0 );\n\t\t\tcylinderMesh.scale.set( 1, lineLength, 1 );\n\n\t\t\tcylinderMesh.rotation.z = Math.PI / 2;\n\n\t\t},\n\n\t\tremove: () => {\n\n\t\t\tscene.remove( obj );\n\n\t\t}\n\t} );\n\n}\n\nfunction updateFromOptions() {\n\n\traycaster.near = params.raycasters.near;\n\traycaster.far = params.raycasters.far;\n\n\t// Update raycaster count\n\twhile ( rayCasterObjects.length > params.raycasters.count ) {\n\n\t\trayCasterObjects.pop().remove();\n\n\t}\n\n\twhile ( rayCasterObjects.length < params.raycasters.count ) {\n\n\t\taddRaycaster();\n\n\t}\n\n\tif ( ! batchedMesh ) {\n\n\t\treturn;\n\n\t}\n\n\t// Update whether or not to use the bounds tree\n\tif (\n\t\t! params.mesh.useBoundsTree && batchedMesh.boundsTrees ||\n\t\tbatchedMesh.boundsTrees && (\n\t\t\tparams.mesh.splitStrategy !== batchedMesh.boundsTrees.splitStrategy ||\n\t\t\tparams.mesh.indirect !== batchedMesh.boundsTrees.indirect\n\t\t)\n\t) {\n\n\t\tbatchedMesh.disposeBoundsTree();\n\t\tbatchedMesh.boundsTrees = null;\n\n\t}\n\n\tif ( params.mesh.useBoundsTree && ! batchedMesh.boundsTrees ) {\n\n\t\tconsole.time( 'computing bounds tree' );\n\t\tbatchedMesh.computeBoundsTree( - 1, {\n\t\t\tmaxLeafSize: 5,\n\t\t\tstrategy: parseFloat( params.mesh.splitStrategy ),\n\t\t\tindirect: params.mesh.indirect,\n\t\t} );\n\t\tbatchedMesh.boundsTrees.splitStrategy = params.mesh.splitStrategy;\n\t\tbatchedMesh.boundsTrees.indirect = params.mesh.indirect;\n\t\tconsole.timeEnd( 'computing bounds tree' );\n\n\t}\n\n}\n\nfunction render() {\n\n\tstats.begin();\n\n\tconst time = window.performance.now();\n\tcontainerObj.rotation.x = 0.0001 * time;\n\tcontainerObj.rotation.y = 0.0001 * time;\n\tcontainerObj.updateMatrixWorld();\n\n\tupdateBatchedMeshInstances();\n\n\trayCasterObjects.forEach( f => f.update() );\n\n\trenderer.render( scene, camera );\n\n\tstats.end();\n\n}\n"],"names":["THREE.Mesh","acceleratedRaycast","THREE.BufferGeometry","computeBoundsTree","disposeBoundsTree","THREE.BatchedMesh","computeBatchedBoundsTree","disposeBatchedBoundsTree","bgColor","meshColor","lineColor","renderer","scene","stats","camera","material","containerObj","batchedMesh","rayCasterObjects","raycaster","THREE.Raycaster","sphere","THREE.SphereGeometry","cylinder","THREE.CylinderGeometry","pointDist","dolly","THREE.Object3D","params","CENTER","init","updateFromOptions","THREE.WebGLRenderer","render","THREE.Scene","THREE.Fog","light","THREE.DirectionalLight","THREE.AmbientLight","THREE.MeshPhongMaterial","createBatchedMesh","THREE.PerspectiveCamera","Stats","gui","dat.GUI","rcFolder","meshFolder","SAH","AVERAGE","knotGeometry","THREE.TorusKnotGeometry","knot2Geometry","sphereGeometry","knotVertices","knot2Vertices","sphereVertices","maxVertices","knotIndexes","knot2Indexes","sphereIndexes","maxIndexes","knotGeometryId","knot2GeometryId","sphereGeometryId","updateBatchedMeshInstances","time","addRaycaster","obj","THREE.MeshBasicMaterial","origMesh","hitMesh","cylinderMesh","x","y","z","origVec","THREE.Vector3","dirVec","xDir","yDir","zDir","res","length","lineLength","f"],"mappings":"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"}