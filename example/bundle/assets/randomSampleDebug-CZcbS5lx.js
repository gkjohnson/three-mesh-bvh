import{M as u,i as M,W as G,c as P,D as R,A as W,P as v,ak as z,g as A,f as j,k as L,e as V,V as m,al as D}from"./ExtendedTriangle-DttJMGjs.js";import{O as I}from"./OrbitControls--aO4oMeG.js";import{A as k}from"./MeshBVH-DAC57waP.js";import{M as F}from"./MeshBVHHelper-DN_ezUtB.js";import{a as q,c as _,d as J}from"./ExtensionUtilities-QU1zl1dQ.js";u.prototype.raycast=q;M.prototype.computeBoundsTree=_;M.prototype.disposeBoundsTree=J;let r,i,n,l=[],s=null;function o(){if(s===null)throw new Error;const f=1103515245,a=12345,c=2e31;return s=(f*s+a)%c,s/c}K();S();function K(){r=new G({antialias:!0}),r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.setClearColor(1118481,1),r.outputEncoding=void 0,document.body.appendChild(r.domElement),n=new P;const a=new R(16777215,1);a.position.set(1,1,1),n.add(a),n.add(new W(11583173,.8)),i=new v(75,window.innerWidth/window.innerHeight,.1,50),i.position.set(0,0,4),i.far=100,i.updateProjectionMatrix(),new I(i,r.domElement);const c=7830035629,T=4697211981,B={strategy:k,packData:!1,maxDepth:1},p=new z(1,1,40,10);p.computeBoundsTree(B),s=c,o();for(var w=0;w<10;w++){let e=new u(p,new A);if(e.rotation.x=o()*10,e.rotation.y=o()*10,e.rotation.z=o()*10,e.position.x=o(),e.position.y=o(),e.position.z=o(),w===2){l.push(e),n.add(e);const x=e.clone();x.material=new j({wireframe:!0,color:16737894}),n.add(x);const E=new F(e,10);n.add(E)}e.updateMatrix(!0),e.updateMatrixWorld(!0)}s=T,o();const t=new L;t.firstHitOnly=!1,t.ray.origin.set(o()*10,o()*10,o()*10),t.ray.direction.copy(t.ray.origin).multiplyScalar(-1).normalize();const O=new V(.1),d=new u(O);d.position.copy(t.ray.at(0,new m)),n.add(d);const h=t.intersectObjects(l,!0);t.firstHitOnly=!0;const y=t.intersectObjects(l,!0);p.boundsTree=null;const C=t.intersectObjects(l,!0);console.log("FIRST HIT",y),console.log("BVH HITS",h),console.log("OG HITS",C);const g=d.clone();g.position.copy(y[0].point),n.add(g);const H=d.clone();H.position.copy(h[0].point),n.add(H);const b=new D;b.geometry.setFromPoints([t.ray.at(0,new m),t.ray.at(20,new m)]),n.add(b),window.addEventListener("resize",function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)},!1)}function S(){requestAnimationFrame(S),r.render(n,i)}
