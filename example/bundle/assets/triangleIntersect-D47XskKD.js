import{aO as P,o as L,W as R,c as T,D as U,A as V,m as v,t as I,e as W,M as g,l as A,i as Y,B as Z,P as D,V as H,n as G,Q as k}from"./ExtendedTriangle-DttJMGjs.js";import{S as B}from"./stats.min-DbzWzcqd.js";import{g as F}from"./lil-gui.module.min-BH_YJbPT.js";import{O as N}from"./OrbitControls--aO4oMeG.js";import"./_commonjsHelpers-CqkleIqs.js";const E={sphereSize:1},e=new P,t=new P;e.a.set(-1,0,0);e.b.set(2,0,-2);e.c.set(2,0,2);t.a.set(1,0,0);t.b.set(-2,-2,0);t.c.set(-2,2,0);e.needsUpdate=!0;t.needsUpdate=!0;let M,r,d,f,x,c=[],a=[],y,m=new L,S,z,h;function O(){f=new R({antialias:!0}),f.setPixelRatio(window.devicePixelRatio),f.setSize(window.innerWidth,window.innerHeight),f.setClearColor(1251612,1),document.body.appendChild(f.domElement),r=new T;const n=new U(16777215,.3);n.position.set(10,10,10),r.add(n),r.add(new V(16777215,.8));const w=new v({color:16711680,side:I}),b=new v({color:255,side:I}),i=new v({color:65280,side:I}),s=new W(1);for(let l=0;l<2;l++){const p=new g(s,w);a.push(p),r.add(p)}for(let l=0;l<3;l++){const p=new g(s,b);c.push(p),r.add(p)}for(let l=0;l<3;l++){const p=new g(s,i);c.push(p),r.add(p)}const X=new A;y=new g(X,w),r.add(y);const C=new Y;C.setAttribute("position",new Z(new Float32Array([1,1,1,2,2,2,3,3,3]),3)),S=new g(C.clone(),b),r.add(S),z=new g(C.clone(),i),r.add(z),d=new D(75,window.innerWidth/window.innerHeight,.1,50),d.position.set(10,10,10),d.far=100,d.updateProjectionMatrix(),x=new N(d,f.domElement),x.target.add(e.a).add(e.b).add(e.c).add(t.a).add(t.b).add(t.c).multiplyScalar(1/6),d.position.add(x.target),x.update(),M=new B,document.body.appendChild(M.dom),x.addEventListener("change",function(){u()}),window.addEventListener("resize",function(){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight),u()},!1)}function j(){h=new F,h.add(E,"sphereSize",0,5,.001).onChange(u);const o=["a1","b1","c1","a2","b2","c2"],n=[e.a,e.b,e.c,t.a,t.b,t.c];for(let i=0;i<6;i++){const s=h.addFolder(o[i]);s.add(n[i],"x").min(-10).max(10).step(.001).onChange(u),s.add(n[i],"y").min(-10).max(10).step(.001).onChange(u),s.add(n[i],"z").min(-10).max(10).step(.001).onChange(u),s.open()}const w=["Inter1","Inter2"],b=[m.start,m.end];for(let i=0;i<2;i++){const s=h.addFolder(w[i]);s.add(b[i],"x").step(.001),s.add(b[i],"y").step(.001),s.add(b[i],"z").step(.001),s.open()}h.open()}function Q(o,n){o.geometry.dispose();const w=new H().subVectors(n.start,n.end);o.geometry=new A(1,1,w.length(),6,4,!0),o.geometry.applyMatrix4(new G().makeTranslation(0,w.length()/2,0)),o.geometry.applyMatrix4(new G().makeRotationX(k.degToRad(90))),o.geometry.computeVertexNormals(),o.position.copy(n.start),o.lookAt(n.end)}function q(){c[0].position.copy(e.a),c[1].position.copy(e.b),c[2].position.copy(e.c),c[3].position.copy(t.a),c[4].position.copy(t.b),c[5].position.copy(t.c),a[0].position.copy(m.start),a[1].position.copy(m.end)}function J(){const o=S.geometry.getAttribute("position");o.setXYZ(0,e.a.x,e.a.y,e.a.z),o.setXYZ(1,e.b.x,e.b.y,e.b.z),o.setXYZ(2,e.c.x,e.c.y,e.c.z),o.needsUpdate=!0,S.geometry.computeVertexNormals();const n=z.geometry.getAttribute("position");n.setXYZ(0,t.a.x,t.a.y,t.a.z),n.setXYZ(1,t.b.x,t.b.y,t.b.z),n.setXYZ(2,t.c.x,t.c.y,t.c.z),n.needsUpdate=!0,z.geometry.computeVertexNormals()}function u(){M.begin(),y.visible=!1,a[0].visible=!1,a[1].visible=!1,e.update(),t.update(),e.intersectsTriangle(t,m)?(Q(y,m),y.visible=!0,a[0].visible=!0,a[1].visible=!0):(m.start.set(1/0,1/0,1/0),m.end.set(1/0,1/0,1/0)),q(),J(),[...c,...a].forEach(n=>{n.scale.setScalar(.005*E.sphereSize*n.position.distanceTo(d.position))}),a.forEach(n=>n.scale.multiplyScalar(1.5)),y.scale.setScalar(.5*Math.min(a[0].scale.x,a[1].scale.x)),y.scale.z=1,h.controllersRecursive().forEach(n=>n.updateDisplay()),f.render(r,d),M.end()}O();j();u();
